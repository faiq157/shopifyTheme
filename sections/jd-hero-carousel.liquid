{{ 'johnny-dang-hero.css' | asset_url | stylesheet_tag }}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const carousel = new JDHeroCarousel('.jd-hero');
  });

  class JDHeroCarousel {
    constructor(selector) {
      this.carousel = document.querySelector(selector);
      if (!this.carousel) return;
      
      this.slides = this.carousel.querySelectorAll('.jd-hero__slide');
      this.dots = this.carousel.querySelectorAll('.jd-hero__dot');
      
      this.currentSlide = 0;
      this.isAutoPlaying = true;
      this.autoPlayInterval = null;
      
      this.init();
    }
    
    init() {
      this.showSlide(0);
      this.bindEvents();
      this.startAutoPlay();
    }
    
    bindEvents() {
      // Dot navigation
      this.dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
          this.goToSlide(index);
        });
      });
      
      
      // Keyboard navigation
      this.carousel.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') {
          this.prevSlide();
        } else if (e.key === 'ArrowRight') {
          this.nextSlide();
        }
      });
      
      // Pause on hover
      this.carousel.addEventListener('mouseenter', () => {
        this.stopAutoPlay();
      });
      
      this.carousel.addEventListener('mouseleave', () => {
        if (this.isAutoPlaying) {
          this.startAutoPlay();
        }
      });
      
      // Touch/swipe support
      this.addSwipeSupport();
    }
    
    addSwipeSupport() {
      let startX = 0;
      let endX = 0;
      
      this.carousel.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
      });
      
      this.carousel.addEventListener('touchend', (e) => {
        endX = e.changedTouches[0].clientX;
        this.handleSwipe(startX, endX);
      });
    }
    
    handleSwipe(startX, endX) {
      const threshold = 50;
      const diff = startX - endX;
      
      if (Math.abs(diff) > threshold) {
        if (diff > 0) {
          this.nextSlide();
        } else {
          this.prevSlide();
        }
      }
    }
    
    showSlide(index) {
      // Remove active class from all slides
      this.slides.forEach((slide, i) => {
        slide.classList.remove('active', 'prev');
        if (i < index) {
          slide.classList.add('prev');
        }
      });
      
      // Remove active class from all dots
      this.dots.forEach(dot => {
        dot.classList.remove('active');
      });
      
      // Add active class to current slide and dot
      if (this.slides[index]) {
        this.slides[index].classList.add('active');
      }
      
      if (this.dots[index]) {
        this.dots[index].classList.add('active');
      }
      
      // Update hero background based on slide index
      this.carousel.setAttribute('data-slide', index);
      
      this.currentSlide = index;
    }
    
    nextSlide() {
      const next = (this.currentSlide + 1) % this.slides.length;
      this.goToSlide(next);
    }
    
    prevSlide() {
      const prev = (this.currentSlide - 1 + this.slides.length) % this.slides.length;
      this.goToSlide(prev);
    }
    
    goToSlide(index) {
      this.stopAutoPlay();
      this.showSlide(index);
      this.startAutoPlay();
    }
    
    startAutoPlay() {
      if (!this.isAutoPlaying) return;
      
      this.autoPlayInterval = setInterval(() => {
        this.nextSlide();
      }, 5000);
    }
    
    stopAutoPlay() {
      if (this.autoPlayInterval) {
        clearInterval(this.autoPlayInterval);
        this.autoPlayInterval = null;
      }
    }
  }
</script>

<section class="jd-hero" role="banner" aria-label="Hero carousel">
  <div class="jd-hero__container">
    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'slide' %}
          <div class="jd-hero__slide" {{ block.shopify_attributes }}>
            <div class="jd-hero__content">
              {% if block.settings.subtitle != blank %}
                <p class="jd-hero__subtitle">{{ block.settings.subtitle }}</p>
              {% endif %}
              
              {% if block.settings.title != blank %}
                <h1 class="jd-hero__title">
                  {% assign title_lines = block.settings.title | split: '\n' %}
                  {% for line in title_lines %}
                    <span class="jd-hero__title-line">{{ line }}</span>
                  {% endfor %}
                </h1>
              {% endif %}
              
          
              
              {% if block.settings.cta_text != blank and block.settings.cta_link != blank %}
                <a href="{{ block.settings.cta_link }}" class="jd-hero__cta">
                  {{ block.settings.cta_text }}
                  <svg class="jd-featured-collections__arrow" width="12" height="12" viewBox="0 0 12 12" fill="none">
                    <path d="M1 11L11 1M11 1H1M11 1V11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                </a>
              {% endif %}
            </div>
            
            <div class="jd-hero__media">
              {% if block.settings.image != blank %}
                <img 
                  class="jd-hero__image"
                  src="{{ block.settings.image | image_url: width: 800 }}"
                  alt="{{ block.settings.image.alt | default: block.settings.title }}"
                  width="800"
                  height="800"
                  loading="{% if forloop.first %}eager{% else %}lazy{% endif %}"
                >
              {% else %}
                {% comment %} Default product images for each slide {% endcomment %}
                {% case forloop.index0 %}
                  {% when 0 %}
                    <img 
                      class="jd-hero__image"
                      src="{{ 'Ring.png' | asset_url }}"
                      alt="Championship Ring"
                      width="800"
                      height="800"
                      loading="{% if forloop.first %}eager{% else %}lazy{% endif %}"
                    >
                  {% when 1 %}
                    <img 
                      class="jd-hero__image"
                      src="{{ 'ring1.png' | asset_url }}"
                      alt="Diamond Chain Collection"
                      width="800"
                      height="800"
                      loading="lazy"
                    >
                  {% when 2 %}
                    <img 
                      class="jd-hero__image"
                      src="{{ 'glasses.png' | asset_url }}"
                      alt="Custom Grillz Design"
                      width="800"
                      height="800"
                      loading="lazy"
                    >
                  {% when 3 %}
                    <img 
                      class="jd-hero__image"
                      src="{{ 'watch.png' | asset_url }}"
                      alt="Luxury Timepiece"
                      width="800"
                      height="800"
                      loading="lazy"
                    >
                  {% when 4 %}
                    <img 
                      class="jd-hero__image"
                      src="{{ 'ring2.png' | asset_url }}"
                      alt="Statement Ring"
                      width="800"
                      height="800"
                      loading="lazy"
                    >
                  {% else %}
                    {% comment %} <div style="width: 400px; height: 400px; background: rgba(255, 255, 255, 0.1); border-radius: 20px; display: flex; align-items: center; justify-content: center; color: rgba(255, 255, 255, 0.5); font-size: 1.2rem;">
                      Product Image
                    </div> {% endcomment %}
                {% endcase %}
              {% endif %}
            </div>
          </div>
      {% endcase %}
    {% endfor %}
  </div>


  <!-- Dot Navigation -->
  <div class="jd-hero__controls">
    {% for block in section.blocks %}
      {% if block.type == 'slide' %}
        <button 
          class="jd-hero__dot{% if forloop.first %} active{% endif %}" 
          aria-label="Go to slide {{ forloop.index }}"
          data-slide="{{ forloop.index0 }}"
        ></button>
      {% endif %}
    {% endfor %}
  </div>

  <!-- Video Preview -->
  <div class="jd-hero__video-preview" {% if section.settings.video_url != blank %}onclick="window.open('{{ section.settings.video_url }}', '_blank')"{% endif %}>
    {% if section.settings.video_thumbnail != blank %}
      <img 
        src="{{ section.settings.video_thumbnail | image_url: width: 400 }}"
        alt="Video preview"
        width="400"
        height="240"
        loading="lazy"
      >
    {% else %}
      <div class="jd-hero__video-placeholder">
        <video 
          class="jd-hero__video"
          width="400"
          height="240"
          muted
          loop
          autoplay
          playsinline
        >
          <source src="{{ 'video_thumbnail.mp4' | asset_url }}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>
    {% endif %}
    <button class="jd-hero__play-btn" aria-label="Play video">
      â–¶
    </button>
  </div>
</section>

<!-- Carousel Overlay -->
<div class="jd-hero__overlay"></div>


<!-- Marquee Section -->
<section class="jd-marquee">
  <div class="jd-marquee__container">
    <div class="jd-marquee__content">
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">KING OF BLING</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">GET FEATURED</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">GET NOTICED</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">DRIP IN DIAMONDS</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">LUXURY THAT TRENDS</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">GET ICED OUT</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">JOIN THE FAMILY</span>
      </div>
      <!-- Duplicate for seamless loop -->
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">KING OF BLING</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">GET FEATURED</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">GET NOTICED</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">DRIP IN DIAMONDS</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">LUXURY THAT TRENDS</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">GET ICED OUT</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">.</span>
      </div>
      <div class="jd-marquee__item">
        <span class="jd-marquee__text">JOIN THE FAMILY</span>
      </div>
    </div>
  </div>
</section>

<!-- Promotion Cards Section -->
<section class="jd-promotion-cards">
  <div class="jd-promotion-cards__container">
    <!-- Custom Jewelry Card -->
    <div class="jd-promotion-card jd-promotion-card--custom">
      <div class="jd-promotion-card__image">
        <div class="jd-promotion-card__image-circle">
          <img src="{{ 'braclet.png' | asset_url }}" alt="Custom Tennis Bracelet" width="300" height="300" loading="lazy">
        </div>
      </div>
      <div class="jd-promotion-card__content">
        <div class="jd-promotion-card__subtitle">CUSTOM BLING, CUSTOM FLEX</div>
        <div class="jd-promotion-card__title">Create Your Own Custom Ice<br>Pieces</div>
      </div>
      <div class="jd-promotion-card__icon">
        <div class="jd-promotion-card__icon-circle">
          <svg width="32" height="32" viewBox="0 0 16 16" fill="none">
            <path d="M4 12L12 4M12 4H6M12 4V10" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Celebrity Endorsements Card -->
    <div class="jd-promotion-card jd-promotion-card--celebrity">
      <div class="jd-promotion-card__header">
        <div class="jd-promotion-card__title">Celebs That <span class="jd-promotion-card__highlight">Choose Us</span></div>
      </div>
      <div class="jd-promotion-card__celebrities">
        <div class="jd-promotion-card__celebrity">
          <img src="{{ 'celb1.jpg' | asset_url }}" alt="Travis Scott" width="60" height="60" loading="lazy">
        </div>
        <div class="jd-promotion-card__celebrity">
          <img src="{{ 'celb2.png' | asset_url }}" alt="Justin Bieber" width="60" height="60" loading="lazy">
        </div>
        <div class="jd-promotion-card__celebrity">
          <img src="{{ 'celb3.jpg' | asset_url }}" alt="Floyd Mayweather" width="60" height="60" loading="lazy">
        </div>
        <div class="jd-promotion-card__icon1">
          <div class="jd-promotion-card__icon-circle">
            <svg width="32" height="32" viewBox="0 0 16 16" fill="none">
              <path d="M8 3V13M3 8H13" stroke="white" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
        </div>
      </div>
      
    </div>
  </div>
</section>


{% schema %}
{
  "name": "JD Hero Carousel",
  "tag": "section",
  "class": "jd-hero-section",
  "max_blocks": 5,
  "settings": [
    {
      "type": "header",
      "content": "Video Preview"
    },
    {
      "type": "image_picker",
      "id": "video_thumbnail",
      "label": "Video Thumbnail"
    },
    {
      "type": "url",
      "id": "video_url",
      "label": "Video URL",
      "info": "Link to open when video preview is clicked"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle",
          "default": "STEP INTO THE SPOTLIGHT"
        },
        {
          "type": "textarea",
          "id": "title",
          "label": "Title",
          "info": "Use line breaks to separate title lines",
          "default": "Redefining\nIced-Out\nLuxury"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description"
        },
        {
          "type": "text",
          "id": "cta_text",
          "label": "Button Text",
          "default": "SHOP NOW"
        },
        {
          "type": "url",
          "id": "cta_link",
          "label": "Button Link"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "JD Hero Carousel",
      "blocks": [
        {
          "type": "slide",
          "settings": {
            "subtitle": "STEP INTO THE SPOTLIGHT",
            "title": "Redefining\nIced-Out\nLuxury",
            "description": "Discover our exclusive collection of luxury jewelry that defines elegance and sophistication.",
            "cta_text": "SHOP NOW",
            "cta_link": "shopify://collections/all"
          }
        },
        {
          "type": "slide",
          "settings": {
            "subtitle": "PREMIUM CHAINS",
            "title": "Diamond\nChain\nCollection",
            "description": "Elevate your style with our handcrafted diamond chains featuring premium stones.",
            "cta_text": "EXPLORE CHAINS",
            "cta_link": "shopify://collections/chains"
          }
        },
        {
          "type": "slide",
          "settings": {
            "subtitle": "CUSTOM GRILLZ",
            "title": "Custom\nGrillz\nDesigns",
            "description": "Get your personalized grillz made with the finest materials and craftsmanship.",
            "cta_text": "GET CUSTOM",
            "cta_link": "shopify://collections/grillz"
          }
        },
        {
          "type": "slide",
          "settings": {
            "subtitle": "LUXURY WATCHES",
            "title": "Timepiece\nCollection",
            "description": "Discover our exclusive range of luxury watches that blend style with precision.",
            "cta_text": "VIEW WATCHES",
            "cta_link": "shopify://collections/watches"
          }
        },
        {
          "type": "slide",
          "settings": {
            "subtitle": "STATEMENT RINGS",
            "title": "Championship\nRings",
            "description": "Create your legacy with our custom championship and statement rings.",
            "cta_text": "DESIGN RING",
            "cta_link": "shopify://collections/rings"
          }
        }
      ]
    }
  ]
}
{% endschema %}